<div class="interfaz">
  <div *ngIf="mostrar_Mensaje_Aviso" class="scan-success-message">
    {{ mensaje_Aviso }}
  </div>

  <div class="menu">
    <nav>
      Veterinaria
      <ul>
        <li><a href="historial_venta">Historial</a></li>
        <li><a href="ventas">Venta</a></li>
        <li><a href="#">Estadisticas</a></li>
      </ul>
    </nav>
  </div>

  <div class="container">
    <div class="buscador">
      <p class="buscador-titulo">Registro Ventas</p>

      <div class="buscador_buscar-input">
        <div class="input-container">
          <input
            type="text"
            (keydown.enter)="buscar_Producto()"
            [(ngModel)]="id_Producto_Input"
            placeholder="Escribe tu bÃºsqueda..."
          />
          <i class="fa fa-times clear-icon" (click)="limpiar_Input()"></i>
        </div>

        <button class="buscador_buscar-limpiar" (click)="limpiar_Input()">
          Borrar
        </button>
      </div>
    </div>

    <div class="producto">
      <div *ngIf="Mostrar_Producto">
        <img [src]="producto_Encontrado.imagen" alt="" />
        <div>
          <p>
            Nombre:
            <span style="color: rgb(224, 97, 97)">
              {{ producto_Encontrado.nombre }}
            </span>
          </p>
          <p>
            Precio: $
            <span style="color: rgb(236, 30, 19)">
              {{ producto_Encontrado.precio }}
            </span>
          </p>
          <p>
            Descripcion
            <span style="color: rgb(200, 26, 34)">
              {{ producto_Encontrado.descripcion }}
            </span>
          </p>
          <p>
            Marca:
            <span style="color: blue">
              {{ producto_Encontrado.marca.nombre }}
            </span>
          </p>
        </div>
      </div>
    </div>

    <div class="tabla">
      <table class="table" style="width: 100%">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Prod</th>
            <th scope="col">Costo</th>
            <th scope="col">Cantidad</th>
            <th scope="col">Granel</th>
            <th scope="col">$ Granel</th>
            <th scope="col">Iva</th>
            <th scope="col">Subtotal</th>
            <th scope="col">Quitar</th>
          </tr>
        </thead>
        <tbody>
          <tr async *ngFor="let producto of productosVenta; let i = index">
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ producto.Nombre }}</td>
            <td> ${{ producto.Precio }}</td>
            <td>
              <input
                style="font-size: 95%; font-weight: 600"
                class="input_productos"
                type="number"
                [(ngModel)]="producto.Cantidad"
                (change)="actualizarSubtotal(producto)"
                (change)="actualizarIva(producto)"
                min="1"
              />
            </td>
            <td *ngIf="producto.VentaGranel">
              <input
                (change)="actualizarVentaGranel($event)"
                type="checkbox"
                name="Yes"
                id=""
              />
            </td>
            <td *ngIf="!producto.VentaGranel">No Disponible</td>

            <td *ngIf="producto.VentaGranel">
              {{ producto.Precio_granel | currency }}
            </td>
            <td *ngIf="!producto.VentaGranel">No Disponible</td>
            <td>{{ producto.Iva }}</td>
            <td>{{ producto.Subtotal }}</td>
            <td>
              <button (click)="eliminar_VentaProducto(producto)">
                <i class="fa fa-times"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <section class="ticket">
      <div class="total_venta">
        <p>
          Total:
          <span
            style="color: rgb(255, 0, 0); font-weight: 800; font-size: 120%"
          >
            $ {{ calcularTotal() }}
          </span>
        </p>
      </div>

      <div class="cambio_venta">
        <label for="Total"> Paga con: $</label>

        <input
          id="Total"
          type="number"
          [(ngModel)]="montoAPagar"
          (change)="calcularCambio()"
        />

        <p style="padding-top: 2px">Cambio: ${{ cambio }}</p>
      </div>

      <button class="generar_ticket" (click)="generar_Ticket()">
        Generar Ticket
      </button>

      <button class="generar_ticket" (click)="guardarVenta()">
        Realizar Venta
      </button>
    </section>
  </div>
</div>
